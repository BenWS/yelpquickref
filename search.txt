//search mechanism

search_request({category_filter:selection, location:selectedLocation, radius_filter:radius}, (error, response, body) => {
        
        var seedValue;
        var body = JSON.parse(body);
        
        //take this total and use within random number generator
        //check the case of the body.total value being greater than 1000
        
        if (body.total >= 1000) {
            seedValue = 1000;
        } else {
            seedValue = body.total
        }
        
        var randomBusiness = 
            Math.floor(
                Math.random() * parseInt(seedValue));
        
        console.log('Random Number Selected: ' + randomBusiness);
        request_yel({category_filter:selection, offset: randomBusiness + 1, location:selectedLocation, radius_filter:radius}, (error, response, body) => {
            var resultBody = JSON.parse(body);
            
            if (resultBody.businesses[0]) {

                var result = resultBody.businesses[0];
                console.log('Business ID: ' + result["id"]);
                var categories = '';
                var categories_slice;
                for (var i = 0; i <= result["categories"].length - 1; i++) {
                    categories = result["categories"][i][0] + ', ' + categories
                    console.log('Categories:' + result["categories"][i][0]);
                }
                
                categories_slice = categories.substr(0, categories.length - 2)
                
                //image 
                var imageResult
                if(result["image_url"]) {
                    imageResult = result["image_url"].replace('ms.jpg','o.jpg')
                } else {
                    imageResult = "https://preview.c9users.io/benws/expressjs/yelpQuickRef/views/no-icon-available_68024.png"
                }
        
                var city = result["location"]["city"] 
                    + ', ' + result["location"]["state_code"]
                    + ' ' + result["location"]["postal_code"]
                    
                var address = result["location"]["address"][0]
                
                var resultsData = {
                    name:result["name"], 
                    yelp_url:result["url"], 
                    reviewCount:result["review_count"], 
                    rating:result["rating"], 
                    categories:categories_slice,
                    image:imageResult,
                    phone:result["display_phone"],
                    address:address,
                    city:city,
                    searchCategory:userSelection,
                    searchLocation:selectedLocation,
                    searchRadius:radius
                }
                    
                res.render("results", {results:resultsData})
            }
        });
    });